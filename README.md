# 上海药品信息管理与查询平台 (SH-Drug-Mgmt)

一个连接药店、供应商、监管部门、物流公司的B2B药品信息管理平台，实现药品信息集中管理、流通追溯、库存监控与监管可视化。

## 📋 项目概述

- **项目名称：** 上海药品信息管理与查询平台（Shanghai Drug Management Platform）
- **架构类型：** B/S架构Web平台
- **技术栈：** Vue3 + Vite + Flask + SQLite
- **核心目标：** 实现药品全生命周期管理，支持B2B模拟交易与智能监管

## ✨ 主要功能

### 🔧 核心模块
- **👤 账户信息管理** - 用户注册、企业认证、权限管理
- **🏪 企业库存管理** - 药品库存登记、更新、智能预警
- **🤝 B2B供求平台** - 供应信息发布、模拟下单、订单管理
- **📊 流通监管** - 流通数据上报、药品全生命周期追溯
- **📈 监管分析** - 多维度监管看板、合规分析报告
- **🚚 智能调度** - 药品定位、最优路径规划、实时运输监控

### 📋 核心功能详情

#### 👤 账户信息管理
- **用户注册：** 用户名唯一性验证、密码强度检查、手机/邮箱验证
- **企业认证：** 按角色提交资质证明、管理员审核、认证状态跟踪
- **密码管理：** 安全的密码修改和找回机制，验证码保护
- **权限管理：** 基于RBAC的角色权限分配，细粒度访问控制

#### 🏪 企业库存管理
- **库存登记：** 药品信息录入、批号管理、有效期跟踪
- **库存更新：** 实时库存调整、出库入库记录
- **智能预警：** 低库存预警、临期药品提醒、每日自动扫描

#### 🤝 B2B供求平台
- **供应发布：** 供应商发布可供应药品信息、有效期管理
- **信息浏览：** 药店查看供应信息、搜索筛选功能
- **模拟下单：** 采购订单创建、9种完整订单状态流转、24小时供应商确认机制
- **订单管理：** 订单全流程跟踪（待确认→已确认→已发货→运输中→已送达→已完成）、订单取消机制、库存验证
- **物流集成：** 供应商发货操作、运单号生成、物流状态同步、药店确认收货

#### 📊 流通监管
- **数据上报：** 物流用户运输状态实时更新、运单号与订单状态同步、位置信息记录
- **药品追溯：** 基于批号的全生命周期追溯、流向链路可视化
- **状态管理：** 流通状态跟踪、订单与物流状态同步、异常情况处理

#### 📈 监管分析
- **监管看板：** 多维度数据展示、实时图表刷新
- **合规报告：** 库存合规分析、流通合规评估、企业合规统计
- **数据导出：** PDF/Excel格式报告生成、自定义筛选条件

#### 🚚 智能调度
- **就近推荐：** 基于地理位置的供应商推荐、距离计算
- **路径规划：** 多目的地最优路径算法、实时交通信息集成
- **实时监控：** 运输车辆位置跟踪、预计到达时间计算

### 👥 用户角色
- **未认证用户（UNAUTHENTICATED）** - 新注册用户默认角色，仅可查看公开信息、提交企业认证申请
- **药店用户（PHARMACY）** - 库存管理、采购下单、查看供应商信息
- **供应商用户（SUPPLIER）** - 供应信息管理、订单处理、库存管理
- **监管用户（REGULATOR）** - 数据监控、合规分析、查看所有数据
- **物流用户（LOGISTICS）** - 运输状态上报、位置更新、路径规划
- **系统管理员（ADMIN）** - 用户管理、权限配置、企业认证审核、系统维护

## 🛠 技术架构

### 前端
- **框架：** Vue 3 + Vite
- **兼容性：** Chrome 90+/Firefox 88+/Edge 90+
- **地图服务：** 高德地图API集成

### 后端
- **框架：** Flask (Python)
- **数据库：** SQLite (开发) / PostgreSQL (生产)
- **认证：** JWT
- **权限：** RBAC
- **实时通信：** WebSocket

### 数据库设计
- **15张核心表** - 支持用户、认证、药品、库存、订单、物流等完整业务流程
- **租户数据隔离** - 严格的多租户数据安全隔离
- **事务一致性** - 库存与流通记录的事务保障
- **操作审计** - 完整的操作日志记录机制

## 📁 项目结构

```
SH-Drug-Mgmt/
├── CLAUDE.md                    # 项目开发参考手册
├── README.md                    # 项目说明文档
├── Docs/                        # 项目文档
│   ├── LearningMaterials/       # 团队学习资料
│   └── RequirementAnalysis/     # 需求分析文档
├── frontend/                    # Vue3前端项目
│   ├── src/
│   │   ├── components/          # Vue组件
│   │   ├── views/              # 页面视图
│   │   ├── router/             # 路由配置
│   │   └── api/                # API接口
│   ├── package.json
│   └── vite.config.js
├── backend/                     # Flask后端项目
│   ├── app.py                  # 应用入口
│   ├── models/                 # 数据模型
│   ├── routes/                 # 路由处理
│   ├── services/               # 业务逻辑
│   └── requirements.txt
├── database/                    # 数据库相关
│   ├── schema.sql              # 数据库结构
│   └── migrations/             # 数据库迁移
└── tests/                      # 测试文件
    ├── unit/                   # 单元测试
    └── integration/            # 集成测试
```


## 🔧 开发规范

### API设计
- RESTful API风格
- JSON数据格式
- JWT认证机制
- 统一错误处理

### 代码规范
- 前端：Vue3 Composition API + TypeScript
- 后端：Python PEP8规范
- 数据库：外键约束 + 索引优化

### 安全要求
- 密码加密存储
- 租户数据严格隔离
- API访问权限控制
- 操作日志记录

## 📊 性能指标

- **页面加载时间** ≤ 3秒
- **API响应时间** ≤ 2秒
- **并发用户数** ≥ 10用户
- **数据容量** 支持5000+流通记录
- **系统可用性** ≥ 95%

## 🚨 项目约束

### 功能边界
- ❌ 不支持真实在线支付
- ❌ 不与国家药监局系统直连
- ❌ 不支持B2C功能（仅B2B）

### 业务约束
- 所有交易均为模拟性质
- 不可用于真实商业交易
- 监管数据仅供分析使用

## 🤝 团队协作

### Git工作流
- **分支策略：** GitFlow
- **代码审查：** 所有PR必须经过审查
- **提交规范：** 遵循Conventional Commits

### Issue管理
- **任务分配：** 基于GitLab Issues
- **进度跟踪：** Milestone管理
- **文档同步：** Wiki文档更新

