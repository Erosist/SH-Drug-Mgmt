stages:
  - test

test-backend:
  stage: test
  tags:
    - SH-Drug-Mgmt
  before_script:
    - cd vue-project/backend
    - pip install -r requirements.txt
    - pip install pytest pytest-flask pytest-mock
  script:
    - export PYTHONPATH=".:$PYTHONPATH"  # Linux/Unix 语法
    - pytest --tb=short -v

test-frontend:
  stage: test
  tags:
    - SH-Drug-Mgmt
  before_script:
    - cd vue-project
    - npm install
  script:
    - npm run test:run