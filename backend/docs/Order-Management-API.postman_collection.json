{
  "info": {
    "name": "è®¢å•ç®¡ç†API - SH-Drug-Mgmt",
    "description": "ä¸Šæµ·è¯å“ç®¡ç†å¹³å° - è®¢å•æ¨¡å—å®Œæ•´ä¸šåŠ¡æµç¨‹APIé›†åˆ",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "ğŸ” èº«ä»½è®¤è¯ (åŸºç¡€æ”¯æ’‘)",
      "item": [
        {
          "name": "è¯åº—ç”¨æˆ·ç™»å½•",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"pharmacy1\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": [
            {
              "name": "è¯åº—ç™»å½•æˆåŠŸ",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": \"pharmacy1\",\n  \"password\": \"password123\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/auth/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "auth",
                    "login"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"access_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...\",\n  \"user\": {\n    \"id\": 4,\n    \"username\": \"pharmacy1\",\n    \"email\": \"pharmacy1@test.com\",\n    \"role\": \"pharmacy\",\n    \"tenant_id\": 4,\n    \"tenant\": {\n      \"id\": 4,\n      \"name\": \"ä»æµåŒ»é™¢è¯æˆ¿\",\n      \"type\": \"PHARMACY\"\n    }\n  }\n}"
            }
          ]
        },
        {
          "name": "ä¾›åº”å•†ç”¨æˆ·ç™»å½•",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"supplier1\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": [
            {
              "name": "ä¾›åº”å•†ç™»å½•æˆåŠŸ",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": \"supplier1\",\n  \"password\": \"password123\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/auth/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "auth",
                    "login"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"access_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...\",\n  \"user\": {\n    \"id\": 1,\n    \"username\": \"supplier1\",\n    \"email\": \"supplier1@test.com\",\n    \"role\": \"supplier\",\n    \"tenant_id\": 1,\n    \"tenant\": {\n      \"id\": 1,\n      \"name\": \"ä¸Šæµ·åŒ»è¯é›†å›¢è‚¡ä»½æœ‰é™å…¬å¸\",\n      \"type\": \"SUPPLIER\"\n    }\n  }\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "ğŸ“‹ ä¾›åº”ä¿¡æ¯æŸ¥è¯¢ (ä¸‹å•å‰å‡†å¤‡)",
      "item": [
        {
          "name": "è·å–ä¾›åº”ä¿¡æ¯åˆ—è¡¨",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/supply/info?page=1&per_page=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "supply",
                "info"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "20"
                },
                {
                  "key": "drug_name",
                  "value": "é˜¿è«è¥¿æ—",
                  "disabled": true
                },
                {
                  "key": "supplier_name",
                  "value": "ä¸Šæµ·åŒ»è¯",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ğŸ›’ è®¢å•ç®¡ç† (æ ¸å¿ƒä¸šåŠ¡æµç¨‹)",
      "item": [
        {
          "name": "ğŸŒŸ 1. åˆ›å»ºè®¢å•(è¯åº—ä¸‹å•)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"supply_info_id\": 1,\n  \"quantity\": 50,\n  \"expected_delivery_date\": \"2025-11-25\",\n  \"notes\": \"ç´§æ€¥è¡¥è´§ï¼Œè¯·å°½å¿«å‘è´§\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "orders"
              ]
            }
          },
          "response": [
            {
              "name": "ä¸‹å•æˆåŠŸ",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"supply_info_id\": 1,\n  \"quantity\": 50,\n  \"expected_delivery_date\": \"2025-11-25\",\n  \"notes\": \"ç´§æ€¥è¡¥è´§ï¼Œè¯·å°½å¿«å‘è´§\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/orders",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "orders"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"msg\": \"è®¢å•åˆ›å»ºæˆåŠŸ\",\n  \"data\": {\n    \"id\": 5,\n    \"order_number\": \"PH20251117001\",\n    \"buyer_tenant_id\": 4,\n    \"supplier_tenant_id\": 1,\n    \"status\": \"PENDING\",\n    \"total_amount\": 790.0,\n    \"total_quantity\": 50,\n    \"created_at\": \"2025-11-17T12:00:00\"\n  }\n}"
            }
          ]
        },
        {
          "name": "2. è·å–è®¢å•åˆ—è¡¨",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders?page=1&per_page=20&status=PENDING&role_filter=my_purchases",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "orders"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "PENDING"
                },
                {
                  "key": "role_filter",
                  "value": "my_purchases",
                  "description": "my_purchases: æˆ‘çš„é‡‡è´­è®¢å•, my_sales: æˆ‘çš„é”€å”®è®¢å•"
                },
                {
                  "key": "order_number",
                  "value": "PH20251117",
                  "disabled": true
                },
                {
                  "key": "drug_name",
                  "value": "é˜¿è«è¥¿æ—",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "3. è·å–è®¢å•è¯¦æƒ…",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{pharmacy_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "1"]
            }
          },
          "response": []
        },
        {
          "name": "ğŸ”„ 4. ä¾›åº”å•†ç¡®è®¤è®¢å•",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"accept\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{order_id}}/confirm",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "orders",
                "{{order_id}}",
                "confirm"
              ]
            }
          },
          "response": [
            {
              "name": "ç¡®è®¤æˆåŠŸ",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"action\": \"accept\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/orders/1/confirm",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "orders",
                    "1",
                    "confirm"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"msg\": \"è®¢å•ç¡®è®¤æˆåŠŸ\",\n  \"data\": {\n    \"id\": 1,\n    \"order_number\": \"PH20251117001\",\n    \"status\": \"CONFIRMED\",\n    \"confirmed_at\": \"2025-11-17T12:30:00\",\n    \"confirmed_by\": 1\n  }\n}"
            }
          ]
        },
        {
          "name": "4b. ä¾›åº”å•†æ‹’ç»è®¢å•",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{supplier_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"reject\",\n  \"reason\": \"åº“å­˜ä¸è¶³ï¼Œæ— æ³•åŠæ—¶ä¾›è´§\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/1/confirm",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "1", "confirm"]
            }
          },
          "response": []
        },
        {
          "name": "5. è¯åº—å–æ¶ˆè®¢å•",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{pharmacy_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"ä¸´æ—¶ä¸éœ€è¦äº†\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/1/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "1", "cancel"]
            }
          },
          "response": []
        },
        {
          "name": "6. ä¾›åº”å•†å‘è´§",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{supplier_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tracking_number\": \"SF1234567890\",\n  \"logistics_tenant_id\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/1/ship",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "1", "ship"]
            }
          },
          "response": []
        },
        {
          "name": "7. è¯åº—ç¡®è®¤æ”¶è´§",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{pharmacy_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notes\": \"è¯å“è´¨é‡è‰¯å¥½ï¼ŒåŒ…è£…å®Œæ•´\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/1/receive",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "1", "receive"]
            }
          },
          "response": []
        },
        {
          "name": "ğŸ“Š 8. è·å–è®¢å•ç»Ÿè®¡",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "orders",
                "stats"
              ]
            }
          },
          "response": [
            {
              "name": "ç»Ÿè®¡æ•°æ®",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{token}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/orders/stats",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "orders",
                    "stats"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"msg\": \"è·å–è®¢å•ç»Ÿè®¡æˆåŠŸ\",\n  \"data\": {\n    \"total\": 12,\n    \"pending\": 3,\n    \"confirmed\": 2,\n    \"shipped\": 1,\n    \"in_transit\": 1,\n    \"delivered\": 0,\n    \"completed\": 4,\n    \"cancelled\": 1,\n    \"this_month\": 5\n  }\n}"
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://127.0.0.1:5000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string",
      "description": "ç”¨æˆ·ç™»å½•åè·å–çš„JWT Tokenï¼Œè¯åº—æˆ–ä¾›åº”å•†éƒ½ä½¿ç”¨è¿™ä¸ªå˜é‡"
    },
    {
      "key": "order_id",
      "value": "1",
      "type": "string",
      "description": "è®¢å•IDï¼Œç”¨äºæµ‹è¯•è®¢å•è¯¦æƒ…å’ŒçŠ¶æ€å˜æ›´æ¥å£"
    }
  ]
}
